# Docusaurus Setup - Summary

## âœ… Complete Setup

The FitFileViewer documentation site is now fully configured with:

### ğŸŒ Custom Domain
- **Production URL**: `https://fitfileviewer.typpi.online`
- **Base URL**: `/` (root path)
- Uses existing `CNAME` file for GitHub Pages

### ğŸ“š TypeDoc Integration
- **Auto-generates API docs** from JSDoc comments in `electron-app/**/*.js`
- **Integrated into build**: `npm run build` runs TypeDoc before Docusaurus
- **Output**: Generated docs appear in `docs/api/` directory
- **Sidebar**: Auto-generated API docs section under "API Reference"

## ğŸš€ Quick Start

```bash
cd docusaurus

# Install dependencies (first time only)
npm install

# Development server (no TypeDoc, fast iteration)
npm start

# Production build (with TypeDoc API docs)
npm run build

# Local build (uses absolute paths in typedoc.local.json)
npm run build:local

# Just generate TypeDoc docs
npm run docs:typedoc

# Preview production build
npm run serve
```

## ğŸ“ Structure

```
docusaurus/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ getting-started/    # Installation, quick start
â”‚   â”œâ”€â”€ user-guide/        # User documentation
â”‚   â”œâ”€â”€ visualization/     # Maps, charts, tables
â”‚   â”œâ”€â”€ architecture/      # Technical architecture
â”‚   â”œâ”€â”€ development/       # Developer guides
â”‚   â”œâ”€â”€ api-reference/     # Manual API docs
â”‚   â”œâ”€â”€ advanced/          # Advanced topics
â”‚   â””â”€â”€ api/               # AUTO-GENERATED by TypeDoc
â”œâ”€â”€ blog/                  # Blog posts
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # React components
â”‚   â”œâ”€â”€ css/              # Custom styles
â”‚   â”œâ”€â”€ js/               # Client-side enhancements
â”‚   â””â”€â”€ pages/            # Custom pages (homepage)
â”œâ”€â”€ static/
â”‚   â””â”€â”€ img/              # Images, favicon, logo
â”œâ”€â”€ docusaurus.config.ts  # Site configuration
â”œâ”€â”€ sidebars.ts           # Sidebar navigation
â”œâ”€â”€ typedoc.json          # TypeDoc config (relative paths)
â”œâ”€â”€ typedoc.local.json    # TypeDoc config (absolute paths for local dev)
â””â”€â”€ package.json          # Dependencies and scripts
```

## ğŸ”§ TypeDoc Configuration

### What Gets Documented

- **Source**: `electron-app/**/*.js` files
- **Includes**: All JavaScript files with JSDoc comments
- **Excludes**:
  - Test files (`**/*.test.js`)
  - Generated types (`**/*.d.ts`, `**/types/**`)
  - Build outputs (`**/dist/**`, `**/build/**`)
  - Problematic files with broken imports (`gpxExport.js`)

### Settings

- **allowJs**: Enabled - processes JavaScript files
- **tsconfig**: Uses `electron-app/tsconfig.json` for context
- **skipErrorChecking**: Enabled - continues on minor errors
- **intentionallyNotExported**: Lists types that may not resolve
- **validation**: Lenient - warns but doesn't fail

## ğŸš¢ Deployment

### Automatic (GitHub Actions)

Push to `main` branch â†’ workflow triggers:

1. Runs `npm install` in `docusaurus/`
2. Runs `npm run build` (includes TypeDoc)
3. Deploys to GitHub Pages
4. Available at `https://fitfileviewer.typpi.online`

### Manual

```bash
cd docusaurus
npm run build
npm run deploy
```

## ğŸ” Troubleshooting

### TypeDoc Warnings

The warnings about `.d.ts` files are **expected** and can be ignored:
```
[warning] The entry point .../types/.../*.d.ts is not referenced by tsconfig
```

These are generated type definitions, not source files. They're excluded from processing.

### TypeDoc Errors

If TypeDoc encounters errors:
- Check `typedoc.json` exclude list
- Problematic files can be excluded individually
- `skipErrorChecking: true` helps with minor issues

### Missing API Docs

If `docs/api/` is empty after build:
- Run `npm run docs:typedoc` separately to see errors
- Check TypeDoc output for specific issues
- Verify electron-app has JSDoc comments

## ğŸ“ Adding TypeDoc Comments

Document your code with JSDoc:

```javascript
/**
 * Formats a distance value for display.
 *
 * @param {number} meters - Distance in meters
 * @param {string} [unit='km'] - Target unit ('km' or 'mi')
 * @returns {string} Formatted distance string
 *
 * @example
 * formatDistance(5000);        // "5.00 km"
 * formatDistance(5000, 'mi');  // "3.11 mi"
 */
export function formatDistance(meters, unit = 'km') {
    // Implementation
}
```

TypeDoc will automatically:
- Extract this documentation
- Generate Markdown files
- Create navigation structure
- Link cross-references

## ğŸ¨ Theme

- **Primary Color**: `#4ade80` (green - fitness theme)
- **Dark Mode**: Default
- **Font**: System UI with monospace code blocks
- **Logo**: Custom SVG with activity graph

## ğŸ“¦ Dependencies

Key Docusaurus plugins:
- `@docusaurus/theme-mermaid` - Diagram support
- `@docusaurus/theme-live-codeblock` - Interactive code examples
- `@easyops-cn/docusaurus-search-local` - Local search
- `docusaurus-plugin-image-zoom` - Image zoom
- `docusaurus-plugin-copy-page-button` - Copy buttons
- `docusaurus-plugin-llms` - AI-friendly docs

TypeDoc plugins:
- `typedoc-plugin-markdown` - Markdown output
- `typedoc-plugin-mdn-links` - MDN links
- `typedoc-plugin-missing-exports` - Find exports
- Plus 5 more for enhanced documentation

## ğŸ¯ Next Steps

1. **Test locally**: `cd docusaurus && npm install && npm start`
2. **Generate API docs**: `npm run docs:typedoc` to test TypeDoc
3. **Build full site**: `npm run build` to test complete build
4. **Push to deploy**: Commit and push to trigger CI deployment

---

**Questions?** Check the main [README.md](README.md) or [Docusaurus docs](https://docusaurus.io/docs).
